//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by Fernflower decompiler)
//

package com.qualcomm.ftcrobotcontroller.opmodes;

import com.qualcomm.robotcore.eventloop.opmode.OpMode;
import com.qualcomm.robotcore.hardware.DcMotor;
import com.qualcomm.robotcore.hardware.IrSeekerSensor;
import com.qualcomm.robotcore.hardware.Servo;
import com.qualcomm.robotcore.hardware.DcMotor.Direction;

public class K9IrSeeker extends OpMode {
    static final double MOTOR_POWER = 0.15D;
    static final double HOLD_IR_SIGNAL_STRENGTH = 0.5D;
    double armPosition;
    double clawPosition;
    DcMotor motorRight;
    DcMotor motorLeft;
    Servo claw;
    Servo arm;
    IrSeekerSensor irSeeker;

    public K9IrSeeker() {
    }

    public void init() {
        this.motorRight = (DcMotor)this.hardwareMap.dcMotor.get("motor_2");
        this.motorLeft = (DcMotor)this.hardwareMap.dcMotor.get("motor_1");
        this.motorLeft.setDirection(Direction.REVERSE);
        this.arm = (Servo)this.hardwareMap.servo.get("servo_1");
        this.claw = (Servo)this.hardwareMap.servo.get("servo_6");
        this.armPosition = 0.1D;
        this.clawPosition = 0.25D;
        this.irSeeker = (IrSeekerSensor)this.hardwareMap.irSeekerSensor.get("ir_seeker");
    }

    public void loop() {
        double angle = 0.0D;
        double strength = 0.0D;
        double right = 0.0D;
        this.arm.setPosition(this.armPosition);
        this.claw.setPosition(this.clawPosition);
        double left;
        if(this.irSeeker.signalDetected()) {
            angle = this.irSeeker.getAngle();
            strength = this.irSeeker.getStrength();
            if(angle < -60.0D) {
                left = -0.15D;
                right = 0.15D;
            } else if(angle < -5.0D) {
                left = 0.09999999999999999D;
                right = 0.15D;
            } else if(angle > 5.0D && angle < 60.0D) {
                left = 0.15D;
                right = 0.09999999999999999D;
            } else if(angle > 60.0D) {
                left = 0.15D;
                right = -0.15D;
            } else if(strength < 0.5D) {
                left = 0.15D;
                right = 0.15D;
            } else {
                left = 0.0D;
                right = 0.0D;
            }
        } else {
            left = 0.0D;
            right = 0.0D;
        }

        this.motorRight.setPower(right);
        this.motorLeft.setPower(left);
        this.telemetry.addData("Text", "*** Robot Data***");
        this.telemetry.addData("angle", "angle:  " + Double.toString(angle));
        this.telemetry.addData("strength", "sig strength: " + Double.toString(strength));
        this.telemetry.addData("left tgt pwr", "left  pwr: " + Double.toString(left));
        this.telemetry.addData("right tgt pwr", "right pwr: " + Double.toString(right));
    }

    public void stop() {
    }
}
